
To hook into projectiles, or to replace them with lookalikes? Existing projectiles come with existing effects,
for good and ill. I'd like snowballs to extinguish targets. I don't want arrows always doing full arrow damage.
Perhaps I can just overwrite the 'on hit' functions entirely, and reimplement the parts I want.
Specifically, put hooks at the start of the various trigger functions.
Actually, PersistantProjectileEntities have easily customized damage. so just set that to zero and handle it myself.
Or I could simply, have all projectile cards throw cards, and just upgrade the snot out of the card projectile

TODO: when pausing a deck, store mana and time in the deck. Restore mana (with time decay) on resume, clear it on close

Cards will drop in Booster Packs, which will usually be related to the dropping mob.
Likely, any mob can drop a generic pack. That way killing modded critters is still worth something.

This mod is problably just going to be the core mechanics and projectiles and such. Content will be provided in Sets

If stuff starts acting strange, consider:
Make CardEffects and BattleCardProjectiles NBT serializable.

TODO: Make Cards!

--Card Sleeves and Damage Values--
sleeveless cards should be akin to stone weapons, while netherite-sleeved cards should be akin to enchanted netherite weapons
quick effects should be somewhat weaker than the balance point, and charge effects better (based on mana cost)
stone swords do 5 damage, enchanted netherite does 11.
leather cards should have some advantage; the material is sub-iron damage, but is less available.
damage becomes more effective point-for-point as it bypasses more armor, but you also need more
to reach new breakpoints where you kill in fewer hits.

*Kills common mobs(20)*, ~*Kills Witches (26)*~, **Kills Hoglin and Endermen(40)**, ~**Kills Brutes(50)**~
                  value                 base (+0%)  iron (+50%) diamond(x2) netherite (+125%)
'light'           - 0*- hand.           1-2 dmg
'very weak'       -0.5- shovel.         3 dmg       3.75 dmg    6 dmg       6.75 dmg
'weak'            - 1 - pickaxe.        4 dmg       6 dmg       8 dmg       9 dmg
'moderate'        - 2 - a sword swipe.  5 dmg       7.5 dmg     10 dmg      11.25 dmg
'strong'          - 3 - an axe chop.    7 dmg       10.5 dmg    14 dmg      15.75 dmg
'very strong'     - 4 - a trident stab. 9           13.5        18          *20.25* dmg
'extremely strong'- 5 - critical axe.   11          16.5        *22*        24.75 dmg
'deadly'          - 7 - crit str axe.   14          *21*        ~*28*~      ~*31.5*~ dmg
'very deadly'     - 9 - crit str II,axe 17          25.5        30          33.75  dmg
'catastrophic'    - 11 - iron golem     *20*        ~*30*~      **40**      **45** dmg

Leather: +25% damage, shuffled into draw pile twice when added to draw pile
Gold: +25% damage, half mana cost (round up)
Emerald: +25% damage, +1 mana gain
Glowstone: +25% damage, +1 mana cost, +1 effect magnitude
Redstone: +25% damage, +1 mana cost, x2 effect duration

--Balance Considerations: Quick Actions--

(1 point = 1 mana gain equivalent)
2-1 point budget for cards with no or a trivial delivery method (target self, block, any ally-targeting effect)
2+1 point budget for cards with a simple delivery method (sweeping melee, basic projectile)
2+2 point budget for cards with a minor drawback (cumbersome delivery, simple delivery + a brief self-debuff)
cards *must* require non-trivial delivery or have a significant cost to pay out mana,
 and should do something to targets.
 (something like Life Tap: lose life, gain mana could be acceptable. Mana Tap: melee, just gain mana would not.)
similarly, cards generally should produce at least 1 mana if they require delivery.

--Balance Considerations: Charge Actions--
Charge actions likely won't come up against a single average mob; they just aren't tanky enough.
So charge effects are for multi-mob fights, consecutive fights, or major fights.
Attack charges should slay a minor foe outright, maim a major foe, or maim multiple minor foes to feel impactful.
As such, charge attacks generally shouldn't do less damage than a Strong, single hit.
Charge actions, naturally, are better than quick actions due to costing mana.
So a 1 cost charge action should be worth around 3 points, plus 0-2 for targeting as with quicks.
A budget of 2 + targeting mod + mana cost, then.
  That would mean a 5-mana simple delivery skill has 8 points to spend.
  'Kill' designed for diamond spends 5 mana on 'extremely strong' damage, with 3 for secondary effects.
  'Kill' designed for iron instead spends 6 on 'deadly' damage with 2 for effects.

Costs for charge effects:
With 2 'weak and 2' attacks on a mob at iron or diamond, that leaves 3-4 mana to spend on a 'Strong and effect' finisher,
  like Cannibalism.
With 3 'weak and 2' attacks killing a mob at diamond, that leaves 5-6 mana to spend on a second kill.
  So 5-6 mana single targets will want 'extremely strong' damage, if intended to kill.
With 4 'weak and 2' attacks killing a mob at iron, that leaves 7-8 mana to spend on a second kill.
  So 7-8 mana single targets will want 'deadly' damage, if intended to kill.
With 5-6 'weak and 2' attacks killing a mob at paper...
  get out of paper, or specialize with 'mid and 1's or 'weak and 3 and cost's!

A cap of 10 mana would fit this system, encouraging players to spend once they have enough for payout
  while leaving room for combos of lesser charge attack or using 'setup' charge attacks

On events:
Two types of event listener: 'persistant' listeners and 'instanced' listeners.
persistent listeners would listen to every card played
instanced listeners would be created at the start of, only listen for, and die at the end of a card play
I don't have a good way to know once a card is done with all its effects, though,
as projectiles and delays detach from the original execution
Well, a PersistantCardEffectContext is already planned.
Put the listeners in that and just iterate though it come event time

--Scrap--
TODO: Add Cardfetti, Cardfetti Brick, and Cardfetti Block items as 0.5/4/40 operation furnace fuels
TODO: Add compression / decompression recipes, brick/block to charcoal furnace recipes
TODO: Add scrapValue to cards, default 1 cardfetti, which can be set to other items and quantities
TODO: Add scraping recipes to turn cards and cardpacks to cardfetti
TODO: Add cardfetti sacrifice use and associated status effect 
Salvage systems exist so that players who don't care about a system or don't have use for a particular item
still get value from finding them, though lesser than if they were able to use it.
In this case, the intent is that unwanted card/packs can be used as either furnace fuel (for those not wanting cards)
or as luck boosters for other card packs (for those who just want different cards)
it could also serve as a secondary currency for the TCG villager, who sells booster packs, set boxes, and possibly starter decks
TODO: set boxes
TODO: profession block for TCG villager
TODO: TCG villager
to reduce inventory bloat, the cards/packs should be rendered down to a homogenized form.
torn up cards (cardfetti?), magic dust... I like cardfetti. the idea that sprinkling it over packs is how you luck boost them tickles me
cardfetti would stack to 64, would burn rather poorly (you can get a lot of it) and would need to be compressible. Possibly twice.
'cardfetti bricks' and 'cardfetti blocks', both as reversible 3x3 compressions.
Cardfetti as fuel:
-if cardfetti burned for half an operation, bricks burned for four, and blocks for 40,
-it would be reasonable for them to be furnace-able into charcoal (blocks)
-cardfetti blocks, being blocks, would also need to be placeable.
Cardfetti as luck:
-right-clicking a stack will consume it, granting a buff based on how much was consumed
-the buff is consumed when next opening a card pack, acting as a luck boost (and thus invoking loot table quality rules)
Exceptions:
some cards are trash even among trash. Specifically, the Passable Papercraft set is craftable from 3 paper
so to 3 paper is must return. Otherwise, it would let you turn a sugar cane farm into infinite cardfetti

--World Integration--
TODO: Prebuilt decks (also needed for TCG villager)
TODO: card packs and prebuilts in chest loot tables
----Cards----
E - effect implemented
T - effect successfully tested
! - known bug
A - art added
C - complete


Horrors of the Night Series (Nighttime Mobs)
 Hordes of Rot (Zombies, Husks, Drowned)
TODO: fix worthless_flesh and ignore_wounds mixup
    --Common--
ET  Mighty Blow - Q: Weak Melee Attack, 2 Mana on hit - A(3): Strong Melee Attack with Knockback 3.
        knockback acting funny, angles are strange
ET  Pummel - Q: Weak Melee Attack, 2 Mana on hit - A(3): Three Moderate Melee Attacks back to back.
ET  Drag Down - Q: Weak Melee Attack, 2 Mana on hit - A(3): Strong Melee Attack, on hit Slow 2 for 5 seconds.
ET  Choke - Q: Weak Melee Attack, 2 Mana on hit - A(3): Moderate Melee Attack, does drowning damage, depletes breath meter on hit.
        Perhaps make this 'very weak' drowning damage?
ET  Infectious Blow - Q: Weak Melee Attack, 3 Mana on hit, Suffer Hunger 2 for 5 seconds. - A(3): Strong Melee Attack, transfer one debuff to target
    Aura of Hunger - Q: Weak Melee Attack, 1 Mana on hit, 1 Mana on Hit - A(?): Aura of Hunger
    Feast or Famine - Q: Randomly restore hunger or suffer Hunger 3 for 10 seconds. Gain 2 Mana. A(?) - ???
ET  Persistence - Q: Recover 20% of missing HP, 1 Mana if healed - A(3): Gain Undying for 30 seconds.
ET  Endurance - Q: Gain Armored for 5 seconds, 1 Mana if wasn't Armored - A(3): Gain Armored for 30 seconds.
    Leadership - Q: Gain Zombie Lord for 5 seconds, 1 Mana if wasn't Zombie Lord - A(2): Gain Zombie Lord for 30 seconds.
ET  Undeath - Q: Gain Undead for 5 seconds, 1 Mana if wasn't Undead  - A(2): Gain Undead for 30 seconds.
ET  Breathless - Q: Gain 3 breath bubbles, 1 Mana if breath recovered - A(2): Gain Water Breathing for 30 seconds.
    --Rare--
C   Cannibalism - Weak Melee Attack, 1 Mana on hit, 50% lifesteal - A(3): Strong Melee Attack, 50% lifesteal
E   Impale - Q: Moderate Melee Attack, no sweeping, more range, 1 Mana on hit - A(5): Throw very strong trident.
ET  Ravenous Hunger - Q: Weak Melee Attack, 3 Mana on hit, Suffer Hunger 2 for 5 seconds. - A(3): (2 + missing hunger) Melee Attack, gain 2 hunger on hit.
ET  Famine - Q: Weak Melee Attack, 3 Mana on hit, Suffer Hunger 2 for 5 seconds. - A(5): 8 block burst: Inflict Instant Damage 2, Hunger 2 for 30 seconds.
    Feast of Famine - Q: Weak Melee Attack, 3 Mana on hit, Suffer Hunger for 5 seconds. A: Dispel Hunger from nearby targets, gain hunger for each dispelled.
ET  Worthless Flesh - Q: Gain Armored for 5 seconds, 1 Mana if wasn't Armored - A(3): Gain Armored 3, Reinforced 3 for 5 seconds.
ET  Necromantic Surge - Q: Recover 20% of missing HP, 1 Mana if healed - A(5): Gain Undying 5 for 5 seconds.
ET  Ignore Wounds - Q: Recover 20% of missing HP, 1 Mana if healed - A(5): Recover 67% of missing HP.
  Status Effects
    --Buffs--
C   Undying X: Next lethal hit leaves user at X*10%hp.
C   Armored X: +(4*X) Armor.
C   Reinforced X: +(2*X) Armor Toughness.
    Zombie Lord X: X*10% chance to summon zombie support when injured.
    --Debuffs--
C   Undead: Healed by Instant Harm, Harmed by Instant Health. Burn In Sunlight.

 Deadfellows (Skeletons, Strays)
 --names sound like mafia-lingo
 --flighty movement, with trickshot arrows that pay out more for skillful positioning
ET  Rattle 'em - Q: Shoot three weak arrows in rapid succession, 1 mana per hit - A(3): Shoot 5 arrows in very rapid succession
ET  Multi-Pronged Proposition - Q: Shoot 3 weak arrows, 1 mana each on hit - A(3): Shoot 5 arrows in a fan (+/- 20, +/- 10, and 0 degrees).
ET  Involve Bystander - Q: Shoot a weak arrow with 2 piercing, 1 mana on each hit - A(3): Shoot a arrow with 2 piercing. On hit, redirect at great speed towards the nearest other non-user entity.
ET  Deliver a Message - Q: Shoot a weak shot, 1 mana +1 per 16 blocks distance on hit. - A(3): Shot damage scales with distance, deadly at 32 blocks.
    Insistent Question - Q: Shoot a weak arrow. On hit, repeat up to twice. 1 mana on hit. - A(3): Shoot a weak arrow. On hit, increase damage and repeat indefinitely.
ET  Let 'em Have It (R) - Q: Shoot 3 weak arrows, 1 mana each hit. A(7): Shoot a stream of countless, strong arrows in a wide cone.
ET  Explosive Rhetoric (R) - Q: Shoot a weak exploding arrow, 1 mana per hit. - A(5): Shoot a devastating, wide area explosing arrow.
--  Vanish - Q: Hop back, gain Invulnerable for .5 second. Gain 1 mana. A(5): Hop back, gain Invulnerable for .5 second and Invisible 3 for 5 seconds.
ET  Scamper - Q: Hop back, gain Invulnerable for .5 second. Gain 1 mana. A(3): Gain Speed 3 and Step Assist for 5 seconds.
ET  Speed - Q: Gain Speed for 5 seconds. Gain 1 mana if you lacked Speed. A(2): Gain Speed for 30 seconds.
ET  Fighting Retreat (R) - Q: Hop back, gain Invulnerable for .5 second. Gain 1 mana. - A(3): Hop far back. Gain Invulnerable for .5 second. Shoot an arrow with punch 2.
ET  Reposition (R) - Q: Hop back, gain Invulnerable for .5 second. Gain 1 mana. A(5): Hop back, gain Invulnerable for .5 second and Speed 3 / Step Assist for 5 seconds.
ET  Make Your Bones (R) - Q: Shoot a weak arrow, 1 mana on hit, +2 on kill. A(6): Shoot a strong arrow. On kill, Refund 4 and gain Speed 3 and Step Assist for 30 seconds.

 ??? (Spiders, Cave Spiders, maybe other bugs like silverfish)
 -Poison and poison interactions
ET  Poison Fang: low cost strong melee attack with poison
ET  Toxic Fang (R): moderate cost (6?), strong melee attack with deadly poison (Poison III long enough for 15 damage?)
E   Necrotic Fang (R): deadly melee attack inflicts Instant Damage II (essentially, does the better of 14-28 melee or 12 AP damage to the target)
ET  Poison Spit: moderate projectile inflicts long poison
ET  Sticky Glob: moderate projectile inflicts long slow
ET  Caustic Goop: moderate projectile inflicts long slow and poison
ET  Spit Web: projectile creates web on hit
ET  Consume: very strong melee attack has full lifesteal if target is poisoned
ET  Devour (R): deadly melee attack has full lifesteal if target is poisoned
ET  Venomous Lunge - Q: weak melee, 2 mana - A(3): Strong, focused strike inflicts poison after lunging.
ET  Ensnaring Lunge - Q: weak melee, 2 mana - A(5): Very strong, focused strike creates web on hit after lunging.
ET  Predation (R) - Q: weak melee, 2 mana - A(8): Deadly, focused strike has full lifesteal if target is poisoned.
  Spider Lair (R): place carpet of webs on nearby ground
  Jump Boost: gain jump boost
  Webwalking: gain Webwalking (ignore slow from webs)
  Aspect of the Spider (R): gain Speed, Webwalking, Jump Boost

TODO: design Wither and Wither Skeleton cards
Dark Triad (Wither Skeletons, Wither)
 --names come from gang-related (especially asian gang) and 'dark triad' mental trait related terms/phrases.
ET  Rough 'em up - Q: Weak non-sweeping Melee Attack, 1 Mana on hit, inflict Slowness 1 for 5 seconds. - A(2): Weak Non-Sweeping melee attack inflicts escalating Weakness and Slowness for 5 seconds. Retain.

The Way of Reaping I (Vindicators and Ravagers)
 --Axe pillagers use aggressive movement, trade blows, and seek revenge
 -Lunging Combo Attacks
ET  Longsword - Q: Weak melee, 2 mana - A(3): Strong lunging strike throws targets. Refund 2 and Retain on miss.
ET  Uppercut - Q: Weak focused melee generates 2 mana and pops target up. - A(3): Strong rising strike throws target skyward.
ET  Shoulder Check - Q: Weak focused melee, 2 mana and knockback. - A(4): Charge forward, inflicting Strong damage, stunning, and dragging all along path.
    Follow-up - Q: Moderate focused melee, 2 mana - A(2): Moderate focused melee is Very Strong if target was recently injured.
 -Trading Attacks (hit expecting to be hit, sometimes inflict momentary weakness 'stunning' as mitigation)
XX  Shoulder Check (see above)
XX  Yield Your Flesh (see below)
XX  Overrun (see above)
    Reckless Strike - Q: Moderate focused melee, 1 mana - A(5): Extremely Strong, focused strike after lunging. Refund 2 and Retain on hit.
 -Low Health Scalars / Retaliation
ET  Yield Your Flesh (R) - Q: Moderate focused melee invites harm for 3 mana - A(3): Moderate to Deadly focused melee attack based on missing health.
XX  Desperation (see below)
    Revenge - Q: Moderate focused melee, 2 mana - A(4): Very Strong focused melee is Deadly if recently injured.
ET  Blood for Blood - Q: Moderate focused melee, 2 mana - A(5): Strong focused melee, returns damage and lifesteals when retaliating to immediate harm.
 -Absorption Hearts
ET  Desperation (R) - Q: Weak focused melee, mana scales with missing health - A(8): Very Deadly, focused melee attack bleeds self and grants Absorption V briefly (20 absorption, 10 seconds).
    Guarded Strike - Q: Moderate focused melee, 2 mana - Q(5): Extremely Strong focused melee grants up to 8 Absorption on hit
    Catch Breath - Q: Gain up to 2 Absorption - A(3): Gain up to 8 Absorption
    Fearlessness (R) - Q: Gain up to 2 Absorption - A(9): Gain up to 20 Absorption
 --Ravagers use extremely high mana, high impact melee and bullheaded bulk to close the gap
    Overrun (R) - Q: Moderate focused melee, 1 mana and knockback. - A(7): Charge forward a long time, inflicting Extremely Strong damage and stunning all along path.
    Stability - Q: Gain Stability for 10 seconds. - A(2): Gain Stability for 30 seconds.
    Crush - Q: Moderate focused melee, 2 mana - A(8): Very Deadly focused melee grants up to 6 Absorption on hit.
    Rend (R) - Q: Moderate focused melee, 2 mana - A(5): Very Strong focused melee is Catastrophic against low health targets.


The Way of Reaping II (Pillagers, Witches, and Evokers)
 --Crossbow pillagers use simple, high damage crossbow bolts that shatter defenses
Focused Bolt
Overdraw
Overpenetration
Staggering Bolt
Sundering Bolt
 --Witches..?
XX  Overrun (see above)

TODO: Endermen and Phantoms
TODO: Blazes and Ghasts
TODO: Pigmen
TODO: Villagers and Iron Golems
TODO: Snow Golems
TODO: Guardians
TODO: The Enderdragon




